{"remainingRequest":"D:\\mymy\\teamplan\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mymy\\teamplan\\src\\views\\systemModule\\systemModuleList.vue?vue&type=style&index=0&id=772694a3&scoped=true&lang=css&","dependencies":[{"path":"D:\\mymy\\teamplan\\src\\views\\systemModule\\systemModuleList.vue","mtime":1597047597453},{"path":"D:\\mymy\\teamplan\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mymy\\teamplan\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\mymy\\teamplan\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\mymy\\teamplan\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mymy\\teamplan\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojc3lzdGVtLWhlYWRlciB7CiAgICBoZWlnaHQ6IDUwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKfQoKLmljb24gewogICAgY3Vyc29yOiBwb2ludGVyOwogICAgbWFyZ2luLXRvcDogMTBweDsKICAgIGZvbnQtc2l6ZTogMjBweDsKICAgIG1hcmdpbi1yaWdodDogMTBweDsKfQoKI3BhZ2luYXRpb24gewogICAgZmxvYXQ6IHJpZ2h0OwogICAgbWFyZ2luLXRvcDogMTBweDsKICAgIG1hcmdpbi1yaWdodDogNTBweDsKfQo="},{"version":3,"sources":["systemModuleList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8MA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"systemModuleList.vue","sourceRoot":"src/views/systemModule","sourcesContent":["/**\r\n* @author: hao.ling\r\n* @date: 2020/8/5 14:47\r\n* @Description: 系统模块列表\r\n*/\r\n<template>\r\n    <div id=\"system-module-list\">\r\n        <a-layout>\r\n            <a-layout-header id=\"system-header\">\r\n                <a-form layout=\"inline\">\r\n                    <a-form-item label=\"系统名称\">\r\n                        <a-select style=\"width: 120px\" v-model=\"system_name\" @change=\"change\" allowClear\r\n                                  placeholder=\"请选择\">\r\n                            <a-select-option v-for=\"system in system_list\" :key=\"system.systemName\">\r\n                                {{system.systemName}}\r\n                            </a-select-option>\r\n                        </a-select>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"模块名称\">\r\n                        <a-select style=\"width: 120px\" v-model=\"module_name\" allowClear placeholder=\"请选择\"\r\n                                  @focus=\"check\">\r\n                            <a-select-option v-for=\"newModule in new_module_list\" :key=\"newModule.moduleName\">\r\n                                {{newModule.moduleName}}\r\n                            </a-select-option>\r\n                        </a-select>\r\n                    </a-form-item>\r\n                    <a-tooltip>\r\n                        <template slot=\"title\">查询</template>\r\n                        <my-icon type=\"icon-search\" class=\"icon\" style=\"color: blue;\" @click=\"search\"/>\r\n                    </a-tooltip>\r\n                    <a-tooltip>\r\n                        <template slot=\"title\">重置</template>\r\n                        <my-icon type=\"icon-zhongzhi\" class=\"icon\" style=\"color: red;\" @click=\"reset\"/>\r\n                    </a-tooltip>\r\n                    <a-tooltip>\r\n                        <template slot=\"title\">新增</template>\r\n                        <my-icon type=\"icon-add1\" class=\"icon\" style=\"color: green;\" @click=\"addSystem\"/>\r\n                    </a-tooltip>\r\n                </a-form>\r\n            </a-layout-header>\r\n            <a-layout-content style=\"background-color: white;\">\r\n                <a-table :dataSource=\"data_list\" bordered :columns=\"column\" :pagination=\"false\" :scroll=\"{x:500,y:500}\"\r\n                         style=\"margin-left: 30px;margin-right: 30px\">\r\n                    <span slot=\"action\" slot-scope=\"text,record\">\r\n                        <a-tooltip>\r\n                            <template slot=\"title\">编辑</template>\r\n                            <my-icon type=\"icon-edit\" class=\"icon\" @click=\"edit(text)\" style=\"color: lawngreen\"/>\r\n                        </a-tooltip>\r\n                        <a-tooltip>\r\n                            <template slot=\"title\">查看</template>\r\n                            <my-icon type=\"icon-chakan\" class=\"icon\" @click=\"view(text)\"\r\n                                     style=\"color: blueviolet\"/>\r\n                        </a-tooltip>\r\n                        <a-tooltip>\r\n                            <template slot=\"title\">删除</template>\r\n                            <a-popconfirm title=\"是否确认删除\" ok-text=\"确认\" cancel-text=\"取消\" @confirm=\"del(record.id)\">\r\n                            <my-icon type=\"icon-delete\" class=\"icon\" @click=\"del(record.id)\" style=\"color: red\"/>\r\n                        </a-popconfirm>\r\n                        </a-tooltip>\r\n                    </span>\r\n                </a-table>\r\n                <a-pagination id=\"pagination\" :default-current=\"curPage\" :total=\"total\" :page-size=\"pageSize\" :show-total=\"total => `共${total}条`\"\r\n                              @change=\"onChange\"/>\r\n            </a-layout-content>\r\n        </a-layout>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    let systemId = 1\r\n    let moduleId = 1\r\n\r\n    const column = [\r\n        {title: \"操作\", key: \"action\", align: \"center\", width: 130, scopedSlots: {customRender: \"action\"}, fixed: \"left\"},\r\n        {title: \"项目名称\", dataIndex: \"systemName\", key: \"system\", align: \"center\", width: 150},\r\n        {title: \"模块名称\", dataIndex: \"moduleName\", key: \"module\", align: \"center\", width: 150},\r\n        {title: \"模块地址\", dataIndex: \"address\", key: \"address\", align: \"center\", width: 300},\r\n        {title: \"环境\", dataIndex: \"pre\", key: \"pre\", align: \"center\", width: 100},\r\n        {title: \"环境地址\", dataIndex: \"preAddress\", key: \"preAddress\", align: \"center\", width: 300},\r\n        {title: \"数据库地址\", dataIndex: \"dbAddress\", key: \"dbAddress\", align: \"center\", width: 300},\r\n        {title: \"通用数据\", dataIndex: \"data\", key: \"data\", align: \"center\", width: 300}\r\n    ]\r\n\r\n    export default {\r\n        name: \"systemModuleList\",\r\n        data() {\r\n            return {\r\n                system_name: undefined ,\r\n                module_name: undefined ,\r\n                system_list: [],\r\n                module_list: [],\r\n                new_module_list: [],\r\n                data_list: [], column,\r\n                total: 0, curPage: 1, pageSize: 5,\r\n                openSelect: false\r\n            }\r\n        },\r\n        created() {\r\n            this.getProjectModuleName()\r\n            this.getSystemModuleList()\r\n        },\r\n        methods: {\r\n            // 获取项目、模块名称\r\n            getProjectModuleName() {\r\n                systemId = 1\r\n                this.system_list = []\r\n                this.module_list = []\r\n                this.Get(\"/project/getProjectTree\", {}).then(res => {\r\n                    console.log(res)\r\n                    res['code'] === 1000 ? res['data'].map((item) => {\r\n                        this.system_list.push({id: systemId, systemName: item['systemName']})\r\n                        moduleId = 1\r\n                        item['modules'].map((module) => {\r\n                            this.module_list.push({\r\n                                id: moduleId, systemId: systemId, moduleName: module['modulesName'],\r\n                                systemName: item['systemName']\r\n                            })\r\n                            moduleId++\r\n                        })\r\n                        systemId++\r\n                    }) : this.$message.error(res['message'])\r\n                })\r\n            },\r\n            // 通过项目名称获取模块信息\r\n            change(value) {\r\n                this.new_module_list = []\r\n                moduleId = 1\r\n                this.module_list.map((list) => {\r\n                    value === list['systemName'] ? this.new_module_list.push({\r\n                        id: moduleId, moduleName: list['moduleName']\r\n                    }) : \"\"\r\n                    moduleId++\r\n                })\r\n                this.module_name = undefined\r\n            },\r\n            // 编辑\r\n            edit(value) {\r\n                this.$router.push({'name':\"systemModuleAdd\", query: {id: value['id']}})\r\n                console.log(value)\r\n            },\r\n            // 查看\r\n            view(value) {\r\n                console.log(value)\r\n            },\r\n            // 删除\r\n            del(value) {\r\n                console.log(value)\r\n            },\r\n            // 查询\r\n            search() {\r\n                // console.log(this.system_name, this.module_name)\r\n                this.getSystemModuleList(this.system_name, this.module_name)\r\n            },\r\n            // 重置\r\n            reset() {\r\n                this.system_name = undefined\r\n                this.module_name = undefined\r\n            },\r\n            // 新增\r\n            add() {\r\n\r\n            },\r\n            // 分页\r\n            onChange(page) {\r\n                this.curPage = page\r\n                this.getSystemModuleList(this.system_name,this.module_name)\r\n            },\r\n            // 检查是否选择项目\r\n            check() {\r\n                if (this.system_name === undefined) {\r\n                    this.$message.error(\"请选择项目名称\", 2)\r\n                }\r\n            },\r\n            // 获取系统模块列表\r\n            getSystemModuleList(programName = undefined , modulesName = undefined ) {\r\n                let data = {}\r\n                programName && modulesName !== null ? data = {\r\n                    programName: this.system_name, modulesName: this.module_name,pageSize: this.pageSize,pageNum : this.curPage\r\n                } : data = {\r\n                    pageSize: this.pageSize,pageNum : this.curPage\r\n                }\r\n                this.data_list = []\r\n                let pre = \"\"\r\n                this.Get(\"/project/getProjectList\", data).then(res => {\r\n                    if (res['code'] === 1000) {\r\n                        this.total = res['data']['total']\r\n                        res['data']['project'].map((item) => {\r\n                            item['env'] === 1 ? pre = \"测试\" : pre = \"生产\"\r\n                            this.data_list.push({\r\n                                systemName: item['programName'], moduleName: item['modulesName'], data: item['comData'],\r\n                                address: item['modulesUrl'], preAddress: item['programHost'], pre: pre,\r\n                                dbAddress: item['sql'], id: item['id']\r\n                            })\r\n                        })\r\n                    } else this.$message.error(res['message'])\r\n                })\r\n            },\r\n\r\n            addSystem(){\r\n                this.$router.push({name:\"systemModuleAdd\"})\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    #system-header {\r\n        height: 50px;\r\n        background-color: white;\r\n    }\r\n\r\n    .icon {\r\n        cursor: pointer;\r\n        margin-top: 10px;\r\n        font-size: 20px;\r\n        margin-right: 10px;\r\n    }\r\n\r\n    #pagination {\r\n        float: right;\r\n        margin-top: 10px;\r\n        margin-right: 50px;\r\n    }\r\n</style>\r\n<style>\r\n\r\n</style>"]}]}